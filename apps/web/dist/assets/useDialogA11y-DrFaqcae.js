import{r as l}from"./index-D3aoGXCM.js";const b=["a[href]","button:not([disabled])","input:not([disabled])","textarea:not([disabled])","select:not([disabled])","[tabindex]:not([tabindex='-1'])"].join(", "),d=r=>Array.from(r.querySelectorAll(b)).filter(s=>!s.hasAttribute("aria-hidden"));function g(r){const s=l.useRef(null),c=l.useRef(null);return l.useEffect(()=>{if(!r)return;const e=s.current;if(!e)return;const i=document.activeElement instanceof HTMLElement?document.activeElement:null,m=()=>{const t=d(e);((c.current&&e.contains(c.current)?c.current:null)??t[0]??e).focus()},E=window.requestAnimationFrame(m),u=t=>{if(t.key!=="Tab")return;const o=d(e);if(o.length===0){t.preventDefault(),e.focus();return}const a=o[0],f=o[o.length-1],n=document.activeElement instanceof HTMLElement?document.activeElement:null;if(t.shiftKey){(n===a||!n||!e.contains(n))&&(t.preventDefault(),f.focus());return}(n===f||!n||!e.contains(n))&&(t.preventDefault(),a.focus())};return document.addEventListener("keydown",u),()=>{window.cancelAnimationFrame(E),document.removeEventListener("keydown",u),i&&i.isConnected&&window.requestAnimationFrame(()=>i.focus())}},[r]),{dialogRef:s,initialFocusRef:c}}export{g as u};
