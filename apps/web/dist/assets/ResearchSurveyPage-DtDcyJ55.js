import{i as B,k as te,D as ae,m as we,R as re,o as Fe,c as Qe,p as Ue,u as qe,r as l,q as Ee,t as $e,j as t,N as Ve,P as Be,E as Ye,w as Ke,x as Ge,T as He,y as Je,U as Xe,A as We}from"./index-D3aoGXCM.js";import{A as U}from"./AppHeader-ChEPhaZr.js";import{g as Ze,F as q}from"./FooterNav-DnmtxKHu.js";import{c as et,t as $}from"./productMetrics-fBnYpfUG.js";import"./useDialogA11y-DrFaqcae.js";const _e="srl-research-survey-responses-v1",tt="srl-research-survey-draft-v1",E=s=>s==="sim"?!0:s==="nao"?!1:null,Y=s=>`${tt}:${s??"guest"}`,at=()=>ae.reduce((s,r)=>(s[r.key]=null,s),{}),Ne=()=>{const s=B.reduce((n,i)=>(n[i.key]={ratings:at(),comment:""},n),{}),r=te.reduce((n,i)=>(n[i.key]=null,n),{});return{age18OrMore:"",actedInEcosystem12Months:"",viewedSrlMaterial:"",primaryRole:"",primaryRoleOther:"",experienceYears:"",sector:"",sectorOther:"",startupStage:"",locationCountry:"",teamSize:"",dimensionAnswers:s,scaleClarity:null,scaleUtility:null,preferredScale:"",preferredScaleOther:"",preferredScaleReason:"",susAnswers:r,usageContexts:[],usageContextOther:"",npsScore:null,acceptableTime:"",adoptionBarriers:"",suggestedImprovements:"",wantsFinalVersion:"",acceptsInterview:"",preferredContact:"",allowsAnonymousQuotes:""}};function rt(s){const r=window.localStorage.getItem(Y(s));if(!r)return null;try{return JSON.parse(r)}catch{return window.localStorage.removeItem(Y(s)),null}}function st(s){const r={values:s.values,nextPath:s.nextPath,startedAtIso:s.startedAtIso??void 0,currentStepKey:s.currentStepKey,updatedAt:new Date().toISOString()};window.localStorage.setItem(Y(s.userId),JSON.stringify(r))}function je(s){window.localStorage.removeItem(Y(s))}const nt=({userId:s,values:r,nextPath:n,startedAtIso:i})=>{const c=E(r.age18OrMore),a=E(r.actedInEcosystem12Months),p=E(r.viewedSrlMaterial);if(c===null||a===null||p===null)throw new Error("Perguntas de triagem incompletas.");const v=c&&a&&p,y=new Date,S=i?new Date(i):null,j=S&&!Number.isNaN(S.getTime())?Math.max(0,Math.round((y.getTime()-S.getTime())/1e3)):null;return{user_id:s,consent_accepted:!0,consent_version:Fe,age_18_or_more:c,acted_in_ecosystem_12m:a,viewed_srl_material:p,is_eligible:v,profile:{primary_role:r.primaryRole,primary_role_other:r.primaryRoleOther.trim()||null,experience_years:r.experienceYears,sector:r.sector,sector_other:r.sectorOther.trim()||null,startup_stage:r.startupStage,location_country:r.locationCountry.trim(),team_size:r.teamSize},dimension_answers:r.dimensionAnswers,scale_feedback:{clarity_1_9:r.scaleClarity,utility_1_9:r.scaleUtility,preferred_scale:r.preferredScale,preferred_scale_other:r.preferredScaleOther.trim()||null,preferred_scale_reason:r.preferredScaleReason.trim()||null},sus_answers:r.susAnswers,adoption_feedback:{usage_contexts:r.usageContexts,usage_context_other:r.usageContextOther.trim()||null,nps_score:r.npsScore,acceptable_time:r.acceptableTime,adoption_barriers:r.adoptionBarriers.trim()||null,suggested_improvements:r.suggestedImprovements.trim()||null},follow_up:{wants_final_version:E(r.wantsFinalVersion),accepts_interview:E(r.acceptsInterview),preferred_contact:r.preferredContact.trim()||null,allows_anonymous_quotes:E(r.allowsAnonymousQuotes)},metadata:{survey_version:re.activeVersion,submitted_from_route:"/survey",next_path:n,user_agent:typeof navigator<"u"?navigator.userAgent:"unknown",estimated_duration_minutes:"10-12",started_at_client:i??null,submitted_at_client:y.toISOString(),completion_seconds:j,completion_minutes:j===null?null:Number((j/60).toFixed(2))}}},ot=s=>{const r=crypto.randomUUID(),n=JSON.parse(window.localStorage.getItem(_e)??"[]"),i={id:r,createdAt:new Date().toISOString(),payload:s};return window.localStorage.setItem(_e,JSON.stringify([i,...n])),{id:r,storage:"local"}};async function it(s){const r=nt(s);if(!we||!s.userId)return ot(r);const{data:n,error:i}=await we.from("research_survey_responses").insert(r).select("id").single();if(i)throw new Error(i.message);return{id:n.id,storage:"supabase"}}const R=[{value:"sim",label:"Sim"},{value:"nao",label:"Nao"}],se=[{key:"triage",title:"Etapa 1 - Triagem",description:"Confirme elegibilidade para a pesquisa."},{key:"profile",title:"Etapa 2 - Perfil",description:"Contexto profissional e experiencia."},{key:"dimensions_1_4",title:"Etapa 3 - Blocos 1 a 4",description:"Avalie clareza e relevancia dos primeiros blocos."},{key:"dimensions_5_8",title:"Etapa 4 - Blocos 5 a 8",description:"Continue a avaliacao dos blocos intermediarios."},{key:"dimensions_9_12",title:"Etapa 5 - Blocos 9 a 12",description:"Finalize a avaliacao das 12 dimensoes."},{key:"scale_and_sus",title:"Etapa 6 - Escala e Usabilidade",description:"Percepcao da escala 1-9 e SUS."},{key:"adoption_and_followup",title:"Etapa 7 - Adocao e Follow-up",description:"Contexto de uso, NPS e dados opcionais."}],lt=[se[0]],_={dimensions_1_4:{title:"5. Avaliacao por dimensao (blocos 1-4)",startQuestionNumber:1,dimensions:B.slice(0,4)},dimensions_5_8:{title:"5. Avaliacao por dimensao (blocos 5-8)",startQuestionNumber:5,dimensions:B.slice(4,8)},dimensions_9_12:{title:"5. Avaliacao por dimensao (blocos 9-12)",startQuestionNumber:9,dimensions:B.slice(8,12)}};function dt(s){return se.some(r=>r.key===s)}function ct(s){return s==="dimensions_1_4"||s==="dimensions_5_8"||s==="dimensions_9_12"}function g({legend:s,name:r,value:n,options:i,onChange:c,dense:a=!1}){return t.jsxs("fieldset",{className:"space-y-2",children:[t.jsx("legend",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary",children:s}),t.jsx("div",{className:`flex flex-wrap gap-2 ${a?"gap-1.5":""}`,children:i.map(p=>{const v=n===p.value;return t.jsxs("label",{className:`inline-flex cursor-pointer items-center gap-2 rounded-lg border px-3 py-2 text-sm transition ${v?"border-primary bg-primary/10 text-text-light-primary dark:text-text-dark-primary":"border-zinc-300 text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800"}`,children:[t.jsx("input",{className:"sr-only",type:"radio",name:r,checked:v,onChange:()=>c(p.value)}),p.label]},String(p.value))})})]})}function V({legend:s,name:r,value:n,onChange:i}){return t.jsx(g,{legend:s,name:r,value:n,options:Ee.map(c=>({value:c,label:String(c)})),onChange:i,dense:!0})}function N({title:s,children:r}){return t.jsxs("section",{className:"rounded-xl border border-zinc-200/80 bg-card-light p-4 dark:border-zinc-800/80 dark:bg-card-dark",children:[t.jsx("h2",{className:"text-base font-semibold text-text-light-primary dark:text-text-dark-primary",children:s}),t.jsx("div",{className:"mt-3 space-y-4",children:r})]})}function ft(){const s=Qe(),[r]=Ue(),{user:n}=qe(),i=r.get("next")||"/canvas",c=re.enabled,[a,p]=l.useState(()=>Ne()),[v,y]=l.useState([]),[S,j]=l.useState(!1),[k,ne]=l.useState(null),[K,w]=l.useState(null),[G,oe]=l.useState(!0),[H,ie]=l.useState(!1),[le,J]=l.useState(null),[O,de]=l.useState(!1),[T,L]=l.useState(null),[I,ce]=l.useState(()=>new Date().toISOString()),[ue,me]=l.useState(null),[u,C]=l.useState("triage"),P=l.useRef(et("survey")),M=l.useRef(!1),pe=l.useRef(!1),xe=l.useRef(!1),ge=l.useRef("triage"),Ie=l.useRef(0),ze=l.useRef(1),he=l.useRef(null),b=a.age18OrMore==="sim"&&a.actedInEcosystem12Months==="sim"&&a.viewedSrlMaterial==="sim",D=a.age18OrMore!==""&&a.actedInEcosystem12Months!==""&&a.viewedSrlMaterial!==""&&!b,m=l.useMemo(()=>D?lt:se,[D]);l.useEffect(()=>{if(!c){de(!0);return}const e=rt((n==null?void 0:n.id)??null);e&&(p(e.values),L(e.updatedAt),e.startedAtIso&&ce(e.startedAtIso),e.currentStepKey&&dt(e.currentStepKey)&&C(e.currentStepKey)),de(!0)},[c,n==null?void 0:n.id]),l.useEffect(()=>{!c||!O||k||(st({userId:(n==null?void 0:n.id)??null,values:a,nextPath:i,startedAtIso:I,currentStepKey:u}),L(new Date().toISOString()))},[u,O,i,k,I,c,n==null?void 0:n.id,a]),l.useEffect(()=>{if(!c){oe(!1),ie(!1),J(null);return}let e=!0;return Ze((n==null?void 0:n.id)??null).then(o=>{e&&(ie(o.accepted),J(null))}).catch(o=>{e&&J(o instanceof Error?o.message:"Falha ao validar consentimento.")}).finally(()=>{e&&oe(!1)}),()=>{e=!1}},[c,n==null?void 0:n.id]),l.useEffect(()=>{var e;m.some(o=>o.key===u)||C(((e=m[0])==null?void 0:e.key)??"triage")},[u,m]);const h=Math.max(0,m.findIndex(e=>e.key===u)),X=m[h]??m[0],W=h===m.length-1,Z=Math.round((h+1)/m.length*100);ge.current=u,Ie.current=h,ze.current=m.length;const be=l.useMemo(()=>Ee.map(e=>`${e} = ${$e[e]}`).join(" | "),[]),d=(e,o)=>{p(x=>({...x,[e]:o}))},Ae=e=>{p(o=>{const z=o.usageContexts.includes(e)?o.usageContexts.filter(f=>f!==e):[...o.usageContexts,e];return{...o,usageContexts:z}})},fe=()=>{const e=[];return a.age18OrMore===""&&e.push("Responda se possui 18 anos ou mais."),a.actedInEcosystem12Months===""&&e.push("Responda se atua ou atuou no ecossistema nos ultimos 12 meses."),a.viewedSrlMaterial===""&&e.push("Confirme se visualizou o SRL Canvas e o guia breve de aplicacao."),e},ye=()=>{const e=[];return a.primaryRole||e.push("Selecione seu papel principal."),a.experienceYears||e.push("Selecione seu tempo de experiencia."),a.sector||e.push("Selecione o setor predominante."),a.startupStage||e.push("Selecione o estagio tipico das startups."),a.locationCountry.trim()||e.push("Informe localidade/pais de atuacao."),a.teamSize||e.push("Selecione o tamanho medio das equipes."),a.primaryRole==="outro"&&!a.primaryRoleOther.trim()&&e.push("Descreva seu papel principal em 'Outro'."),a.sector==="outro"&&!a.sectorOther.trim()&&e.push("Descreva o setor em 'Outro'."),e},F=e=>{const o=[];for(const x of e){const z=a.dimensionAnswers[x.key];for(const f of ae)if(z.ratings[f.key]===null){o.push(`Preencha todas as avaliacoes do bloco ${x.label}.`);break}}return o},ke=()=>{const e=[];a.scaleClarity===null&&e.push("Responda a clareza da escala 1 a 9."),a.scaleUtility===null&&e.push("Responda a utilidade da escala 1 a 9."),a.preferredScale||e.push("Informe se preferiria outra escala."),a.preferredScale==="outro"&&!a.preferredScaleOther.trim()&&e.push("Descreva a escala preferida em 'Outro'."),a.preferredScale!=="nao"&&!a.preferredScaleReason.trim()&&e.push("Explique por que prefere outra escala.");for(const o of te)if(a.susAnswers[o.key]===null){e.push("Responda todos os itens de usabilidade (SUS).");break}return e},ve=()=>{const e=[];return a.usageContexts.length===0&&e.push("Selecione pelo menos um contexto de uso do SRL Canvas."),a.usageContexts.includes("outro")&&!a.usageContextOther.trim()&&e.push("Descreva o contexto em 'Outro'."),a.npsScore===null&&e.push("Informe a nota de recomendacao (NPS)."),a.acceptableTime||e.push("Selecione o tempo aceitavel de aplicacao."),a.acceptsInterview==="sim"&&!a.preferredContact.trim()&&e.push("Informe contato preferido para follow-up."),e},Se=e=>{switch(e){case"triage":return fe();case"profile":return b?ye():[];case"dimensions_1_4":case"dimensions_5_8":case"dimensions_9_12":return b?F(_[e].dimensions):[];case"scale_and_sus":return b?ke():[];case"adoption_and_followup":return b?ve():[];default:return[]}},Oe=()=>{const e=[];return e.push(...fe()),b&&(e.push(...ye()),e.push(...F(_.dimensions_1_4.dimensions)),e.push(...F(_.dimensions_5_8.dimensions)),e.push(...F(_.dimensions_9_12.dimensions)),e.push(...ke()),e.push(...ve())),Array.from(new Set(e))},Te=()=>{h!==0&&(w(null),y([]),C(m[h-1].key),Ce())},Le=()=>{if(W)return;const e=Se(X.key);if(e.length>0){y(Array.from(new Set(e))),w(null);return}w(null),y([]),C(m[h+1].key),Ce()},Pe=async()=>{const e=Oe();if(e.length>0){y(e),w(null);const o=m.find(x=>Se(x.key).length>0);o&&C(o.key);return}y([]),w(null),j(!0);try{const o=await it({userId:(n==null?void 0:n.id)??null,values:a,nextPath:i,startedAtIso:I}),x=Re(I);$("survey_completed",{sessionId:P.current,eligible:b,stepCount:m.length,completionSeconds:x,storage:o.storage}),pe.current=!0,me(ut(I)),je((n==null?void 0:n.id)??null),L(null),ne(o)}catch(o){w(o instanceof Error?o.message:"Falha ao enviar pesquisa.")}finally{j(!1)}},Me=e=>{e.preventDefault(),Pe()},ee=e=>{M.current&&(pe.current||xe.current||($("survey_step_abandoned",{sessionId:P.current,stepKey:ge.current,reason:e}),xe.current=!0))},De=()=>{ee("responder_depois"),s(i)};return l.useEffect(()=>{c&&(G||!H||!O||k||M.current||($("survey_started",{sessionId:P.current,startedWithDraft:!!T}),M.current=!0))},[G,T,H,O,k,c]),l.useEffect(()=>{if(!M.current||k)return;const e=`${u}:${h}:${m.length}`;he.current!==e&&(he.current=e,$("survey_step_viewed",{sessionId:P.current,stepKey:u,stepIndex:h,stepCount:m.length}))},[h,u,k,m.length]),l.useEffect(()=>{const e=()=>{ee("page_unload")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e),ee("route_exit")}},[]),c?G?t.jsxs("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden bg-background-light font-display dark:bg-background-dark",children:[t.jsx(U,{title:"Questionario Quantitativo SRL Canvas",backTo:i}),t.jsx("main",{className:"flex-grow px-4 pb-28 pt-6",children:t.jsx("section",{className:"rounded-xl border border-zinc-200/80 bg-card-light p-4 text-sm text-text-light-secondary dark:border-zinc-800/80 dark:bg-card-dark dark:text-text-dark-secondary",children:"Carregando status do consentimento (TCLE)..."})}),t.jsx(q,{})]}):H?k?t.jsxs("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden bg-background-light font-display dark:bg-background-dark",children:[t.jsx(U,{title:"Pesquisa Academica",backTo:i}),t.jsx("main",{className:"flex-grow px-4 pb-28 pt-6",children:t.jsxs("section",{className:"rounded-xl border border-emerald-300/80 bg-emerald-50 p-4 dark:border-emerald-700/70 dark:bg-emerald-900/20",children:[t.jsx("h2",{className:"text-base font-semibold text-emerald-900 dark:text-emerald-200",children:"Obrigado pela sua contribuicao"}),t.jsxs("p",{className:"mt-2 text-sm text-emerald-800 dark:text-emerald-300",children:["Resposta enviada com sucesso. Protocolo: ",t.jsx("strong",{children:k.id})]}),ue&&t.jsxs("p",{className:"mt-1 text-xs text-emerald-700 dark:text-emerald-400",children:["Tempo aproximado de preenchimento: ",t.jsx("strong",{children:ue})]}),t.jsxs("p",{className:"mt-1 text-xs text-emerald-700 dark:text-emerald-400",children:["Armazenamento:"," ",k.storage==="supabase"?"Supabase":"localStorage (modo local)"]}),t.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[t.jsx("button",{type:"button",onClick:()=>s(i),className:"rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white hover:brightness-110",children:"Voltar"}),t.jsx("button",{type:"button",onClick:()=>{je((n==null?void 0:n.id)??null),ne(null),p(Ne()),L(null),me(null),ce(new Date().toISOString()),C("triage"),y([]),w(null)},className:"rounded-lg border border-zinc-300 px-4 py-2 text-sm font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Enviar nova resposta"})]})]})}),t.jsx(q,{})]}):t.jsxs("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden bg-background-light font-display dark:bg-background-dark",children:[t.jsx(U,{title:"Questionario Quantitativo SRL Canvas",backTo:i}),t.jsxs("main",{className:"flex-grow space-y-4 px-4 pb-28 pt-6",children:[t.jsxs("section",{className:"rounded-xl border border-zinc-200/80 bg-card-light p-4 dark:border-zinc-800/80 dark:bg-card-dark",children:[t.jsx("h2",{className:"text-base font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Antes de comecar"}),t.jsxs("p",{className:"mt-2 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:["Tempo estimado de resposta: ",t.jsx("strong",{children:"10 a 12 minutos"}),"."]}),t.jsx("p",{className:"mt-1 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:"Sua participacao e essencial para esta pesquisa de mestrado e para validar cientificamente o SRL Canvas."}),t.jsx("p",{className:"mt-1 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:"O questionario foi dividido em etapas curtas para facilitar a conclusao."}),t.jsxs("p",{className:"mt-1 text-xs text-text-light-secondary dark:text-text-dark-secondary",children:["Versao ativa do instrumento: ",t.jsx("strong",{children:re.activeVersion})]})]}),t.jsxs("section",{className:"rounded-xl border border-zinc-200/80 bg-card-light p-4 dark:border-zinc-800/80 dark:bg-card-dark",children:[t.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[t.jsxs("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary",children:["Etapa ",h+1," de ",m.length]}),t.jsxs("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:[Z,"% concluido"]})]}),t.jsx("div",{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Z,className:"mt-2 h-2 w-full overflow-hidden rounded-full bg-zinc-200 dark:bg-zinc-800",children:t.jsx("div",{className:"h-full rounded-full bg-primary transition-[width] duration-300",style:{width:`${Z}%`}})}),t.jsx("h3",{className:"mt-3 text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:X.title}),t.jsx("p",{className:"mt-1 text-xs text-text-light-secondary dark:text-text-dark-secondary",children:X.description})]}),u==="triage"&&t.jsxs(N,{title:"1. Triagem e elegibilidade",children:[t.jsx(g,{legend:"1.1 Voce possui 18 anos ou mais?",name:"age18",value:a.age18OrMore,options:R,onChange:e=>d("age18OrMore",e)}),t.jsx(g,{legend:"1.2 Voce atua ou atuou no ecossistema de inovacao/startups nos ultimos 12 meses?",name:"ecosystem12months",value:a.actedInEcosystem12Months,options:R,onChange:e=>d("actedInEcosystem12Months",e)}),t.jsx(g,{legend:"1.3 Antes de responder, voce visualizou o SRL Canvas e o guia breve de aplicacao?",name:"viewedMaterial",value:a.viewedSrlMaterial,options:R,onChange:e=>d("viewedSrlMaterial",e)}),D&&t.jsx("p",{className:"rounded-lg border border-amber-200 bg-amber-50 p-3 text-sm text-amber-800 dark:border-amber-700/40 dark:bg-amber-900/20 dark:text-amber-300",children:"Pelas respostas de triagem, voce nao se enquadra no perfil de elegibilidade completa. Se desejar, envie apenas a triagem e prossiga para o app."})]}),b&&u==="profile"&&t.jsxs(N,{title:"3. Perfil do respondente",children:[t.jsx(g,{legend:"3.1 Qual o seu papel principal no ecossistema de inovacao?",name:"primaryRole",value:a.primaryRole,options:Be.map(e=>({value:e.value,label:e.label})),onChange:e=>d("primaryRole",e)}),a.primaryRole==="outro"&&t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Especifique seu papel"}),t.jsx("input",{className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"text",value:a.primaryRoleOther,onChange:e=>d("primaryRoleOther",e.target.value)})]}),t.jsx(g,{legend:"3.2 Qual o seu tempo de experiencia com startups?",name:"experienceYears",value:a.experienceYears,options:Ye.map(e=>({value:e.value,label:e.label})),onChange:e=>d("experienceYears",e)}),t.jsx(g,{legend:"3.3 Qual o setor predominante de sua atuacao?",name:"sector",value:a.sector,options:Ke.map(e=>({value:e.value,label:e.label})),onChange:e=>d("sector",e)}),a.sector==="outro"&&t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Especifique o setor"}),t.jsx("input",{className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"text",value:a.sectorOther,onChange:e=>d("sectorOther",e.target.value)})]}),t.jsx(g,{legend:"3.4 Qual o estagio tipico das startups com as quais voce interage?",name:"startupStage",value:a.startupStage,options:Ge.map(e=>({value:e.value,label:e.label})),onChange:e=>d("startupStage",e)}),t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary",children:"3.5 Qual a sua localidade/pais de atuacao?"}),t.jsx("input",{className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"text",value:a.locationCountry,onChange:e=>d("locationCountry",e.target.value),placeholder:"Ex.: Campo Grande, Brasil"})]}),t.jsx(g,{legend:"3.6 Qual o tamanho medio das equipes que voce acompanha/avalia?",name:"teamSize",value:a.teamSize,options:He.map(e=>({value:e.value,label:e.label})),onChange:e=>d("teamSize",e)})]}),b&&ct(u)&&t.jsxs(N,{title:_[u].title,children:[t.jsxs("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:["Escala Likert: ",be]}),t.jsx("div",{className:"space-y-4",children:_[u].dimensions.map((e,o)=>{const x=a.dimensionAnswers[e.key],z=_[u].startQuestionNumber+o;return t.jsxs("article",{className:"rounded-xl border border-zinc-200/80 p-3 dark:border-zinc-800/80",children:[t.jsxs("h3",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:["5.",z,". ",e.label]}),t.jsxs("div",{className:"mt-3 space-y-3",children:[ae.map(f=>t.jsx(V,{legend:f.label,name:`${e.key}_${f.key}`,value:x.ratings[f.key],onChange:A=>p(Q=>({...Q,dimensionAnswers:{...Q.dimensionAnswers,[e.key]:{...Q.dimensionAnswers[e.key],ratings:{...Q.dimensionAnswers[e.key].ratings,[f.key]:A}}}}))},`${e.key}_${f.key}`)),t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Comentario breve (opcional)"}),t.jsx("textarea",{className:"mt-1 block min-h-20 w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",value:x.comment,onChange:f=>p(A=>({...A,dimensionAnswers:{...A.dimensionAnswers,[e.key]:{...A.dimensionAnswers[e.key],comment:f.target.value}}}))})]})]})]},e.key)})})]}),b&&u==="scale_and_sus"&&t.jsxs(t.Fragment,{children:[t.jsxs(N,{title:"6. Escala de niveis (1 a 9) - clareza e utilidade",children:[t.jsx(V,{legend:"6.1 A escala de 1 a 9 e clara e com ancoras suficientes para diferenciar os niveis?",name:"scaleClarity",value:a.scaleClarity,onChange:e=>d("scaleClarity",e)}),t.jsx(V,{legend:"6.2 A escala de 1 a 9 e util para comparacoes entre startups?",name:"scaleUtility",value:a.scaleUtility,onChange:e=>d("scaleUtility",e)}),t.jsx(g,{legend:"6.3 Voce preferiria outra escala?",name:"preferredScale",value:a.preferredScale,options:Je.map(e=>({value:e.value,label:e.label})),onChange:e=>d("preferredScale",e)}),a.preferredScale==="outro"&&t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Qual escala preferida?"}),t.jsx("input",{className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"text",value:a.preferredScaleOther,onChange:e=>d("preferredScaleOther",e.target.value)})]}),a.preferredScale!=="nao"&&a.preferredScale!==""&&t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Por que?"}),t.jsx("textarea",{className:"mt-1 block min-h-20 w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",value:a.preferredScaleReason,onChange:e=>d("preferredScaleReason",e.target.value)})]})]}),t.jsxs(N,{title:"7. Usabilidade (SUS - System Usability Scale)",children:[t.jsxs("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:["Escala Likert: ",be]}),t.jsx("div",{className:"space-y-3",children:te.map(e=>t.jsx(V,{legend:`7.${e.key} ${e.label}`,name:`sus_${e.key}`,value:a.susAnswers[e.key],onChange:o=>p(x=>({...x,susAnswers:{...x.susAnswers,[e.key]:o}}))},`sus_${e.key}`))})]})]}),b&&u==="adoption_and_followup"&&t.jsxs(t.Fragment,{children:[t.jsxs(N,{title:"8. Aplicacao, utilidade e adocao",children:[t.jsxs("fieldset",{className:"space-y-2",children:[t.jsx("legend",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary",children:"8.1 Em quais contextos voce usaria o SRL Canvas? (Marque todas as opcoes)"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:Xe.map(e=>{const o=a.usageContexts.includes(e.value);return t.jsxs("label",{className:`inline-flex cursor-pointer items-center gap-2 rounded-lg border px-3 py-2 text-sm transition ${o?"border-primary bg-primary/10 text-text-light-primary dark:text-text-dark-primary":"border-zinc-300 text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800"}`,children:[t.jsx("input",{className:"sr-only",type:"checkbox",checked:o,onChange:()=>Ae(e.value)}),e.label]},e.value)})})]}),a.usageContexts.includes("outro")&&t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:'Especifique o contexto em "Outro"'}),t.jsx("input",{className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"text",value:a.usageContextOther,onChange:e=>d("usageContextOther",e.target.value)})]}),t.jsx(g,{legend:"8.2 Qual a probabilidade de voce recomendar o SRL Canvas? (NPS 0 a 10)",name:"npsScore",value:a.npsScore,options:Array.from({length:11},(e,o)=>({value:o,label:String(o)})),onChange:e=>d("npsScore",e),dense:!0}),t.jsx(g,{legend:"8.3 Qual seria o tempo aceitavel de aplicacao do SRL Canvas (por startup)?",name:"acceptableTime",value:a.acceptableTime,options:We.map(e=>({value:e.value,label:e.label})),onChange:e=>d("acceptableTime",e)}),t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary",children:"8.4 Quais barreiras de adocao voce enxerga para o SRL Canvas?"}),t.jsx("textarea",{className:"mt-1 block min-h-24 w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",value:a.adoptionBarriers,onChange:e=>d("adoptionBarriers",e.target.value)})]}),t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary",children:"8.5 Quais as 1-3 principais melhorias que voce sugeriria para o SRL Canvas?"}),t.jsx("textarea",{className:"mt-1 block min-h-24 w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",value:a.suggestedImprovements,onChange:e=>d("suggestedImprovements",e.target.value)})]})]}),t.jsxs(N,{title:"9. Dados para follow-up (opcionais)",children:[t.jsx(g,{legend:"9.1 Deseja receber a versao final do SRL Canvas e/ou relatorio-sintese da pesquisa?",name:"wantsFinalVersion",value:a.wantsFinalVersion,options:R,onChange:e=>d("wantsFinalVersion",e)}),t.jsx(g,{legend:"9.2 Aceita ser convidado(a) para entrevista de aprofundamento (20-30 minutos)?",name:"acceptsInterview",value:a.acceptsInterview,options:R,onChange:e=>d("acceptsInterview",e)}),a.acceptsInterview==="sim"&&t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm font-medium text-text-light-primary dark:text-text-dark-primary",children:"9.3 Contato preferido (e-mail ou WhatsApp)"}),t.jsx("input",{className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"text",value:a.preferredContact,onChange:e=>d("preferredContact",e.target.value)})]}),t.jsx(g,{legend:"9.4 Autoriza citacao nao identificada de trechos das respostas em publicacoes academicas?",name:"allowsAnonymousQuotes",value:a.allowsAnonymousQuotes,options:R,onChange:e=>d("allowsAnonymousQuotes",e)})]})]}),(v.length>0||K)&&t.jsxs("section",{className:"rounded-xl border border-red-300/80 bg-red-50 p-4 dark:border-red-700/70 dark:bg-red-900/20",children:[t.jsx("h3",{className:"text-sm font-semibold text-red-800 dark:text-red-300",children:"Revise os pontos abaixo"}),K&&t.jsx("p",{className:"mt-1 text-sm text-red-700 dark:text-red-300",children:K}),v.length>0&&t.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm text-red-700 dark:text-red-300",children:v.map(e=>t.jsx("li",{children:e},e))})]}),t.jsxs("form",{onSubmit:Me,className:"space-y-3",children:[t.jsxs("div",{className:"flex flex-wrap gap-2",children:[h>0&&t.jsx("button",{type:"button",onClick:Te,disabled:S,className:"rounded-lg border border-zinc-300 px-4 py-2 text-sm font-semibold text-text-light-secondary hover:bg-zinc-100 disabled:cursor-not-allowed disabled:opacity-60 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Etapa anterior"}),!W&&t.jsx("button",{type:"button",onClick:Le,disabled:S,className:"rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white hover:brightness-110 disabled:cursor-not-allowed disabled:opacity-60",children:"Proxima etapa"}),W&&t.jsx("button",{type:"submit",disabled:S,className:"rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white hover:brightness-110 disabled:cursor-not-allowed disabled:opacity-60",children:S?"Enviando...":D?"Enviar triagem":"Enviar pesquisa"}),t.jsx("button",{type:"button",onClick:De,className:"rounded-lg border border-zinc-300 px-4 py-2 text-sm font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Responder depois"})]}),T&&t.jsxs("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary",children:["Rascunho salvo automaticamente em ",new Date(T).toLocaleString("pt-BR")]})]})]}),t.jsx(q,{})]}):t.jsxs("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden bg-background-light font-display dark:bg-background-dark",children:[t.jsx(U,{title:"Questionario Quantitativo SRL Canvas",backTo:i}),t.jsx("main",{className:"flex-grow space-y-4 px-4 pb-28 pt-6",children:t.jsxs("section",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4 dark:border-amber-700/40 dark:bg-amber-900/20",children:[t.jsx("h2",{className:"text-sm font-semibold text-amber-800 dark:text-amber-300",children:"Consentimento obrigatorio"}),t.jsx("p",{className:"mt-2 text-sm text-amber-800 dark:text-amber-300",children:"Para responder o questionario, voce precisa aceitar o TCLE antes."}),le&&t.jsx("p",{className:"mt-2 text-xs text-red-600 dark:text-red-300",children:le}),t.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[t.jsx("button",{type:"button",onClick:()=>s(`/survey/consent?next=${encodeURIComponent(i)}`),className:"rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white hover:brightness-110",children:"Ler e aceitar TCLE"}),t.jsx("button",{type:"button",onClick:()=>s(i),className:"rounded-lg border border-zinc-300 px-4 py-2 text-sm font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Responder depois"})]})]})}),t.jsx(q,{})]}):t.jsx(Ve,{replace:!0,to:i})}function ut(s){const r=Re(s);if(r===null)return null;const n=Math.floor(r/60),i=r%60;return`${n}m ${String(i).padStart(2,"0")}s`}function Re(s){const r=new Date(s);if(Number.isNaN(r.getTime()))return null;const n=Date.now()-r.getTime();return n<0?null:Math.round(n/1e3)}function Ce(){typeof window>"u"||/jsdom/i.test(window.navigator.userAgent)||window.scrollTo({top:0,behavior:"smooth"})}export{ft as ResearchSurveyPage};
