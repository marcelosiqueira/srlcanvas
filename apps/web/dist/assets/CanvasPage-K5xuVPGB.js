import{r as a,j as e,c as ze,u as we,a as Ce,S as j,d as Se,G as le,v as Ee,h as ce,s as Re,e as Me,f as Ae}from"./index-SmJ9RC13.js";import{u as xe}from"./useDialogA11y-zbjFcg1S.js";import{F as Ie,a as _e}from"./FooterNav-DCbR_-nU.js";import{c as De,R as Be}from"./ResultsModal-62Q8vwlg.js";import{c as Te,t as J,g as Oe}from"./productMetrics-fBnYpfUG.js";const Pe=r=>{if(!(r instanceof HTMLElement))return!1;const i=r.tagName.toLowerCase();return i==="input"||i==="textarea"||i==="select"||r.isContentEditable};function Le({block:r,value:i,onClose:h,onSave:o,onSaveAndNext:d,showSaveAndNext:f=!1}){const[g,L]=a.useState(i.notes),[y,F]=a.useState(i.evidence),[m,N]=a.useState(i.score??1),{dialogRef:x,initialFocusRef:I}=xe(!0);a.useEffect(()=>{const s=p=>{p.key==="Escape"&&h()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[h]);const u=a.useMemo(()=>r.levels.find(s=>s.level===m),[r.levels,m]),S=()=>{o({score:m,notes:g.trim(),evidence:y.trim()})},E=()=>{d&&d({score:m,notes:g.trim(),evidence:y.trim()})},$=m>3&&y.trim().length===0;return a.useEffect(()=>{const s=p=>{if(p.key>="1"&&p.key<="9"&&!Pe(p.target)){N(Number(p.key));return}(p.metaKey||p.ctrlKey)&&p.key==="Enter"&&(p.preventDefault(),o({score:m,notes:g.trim(),evidence:y.trim()}))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[y,g,o,m]),e.jsx("div",{className:"fixed inset-0 z-40 flex items-end justify-center bg-slate-900/55 p-4 md:items-center",children:e.jsxs("div",{ref:x,tabIndex:-1,role:"dialog","aria-modal":"true","aria-label":`Editar bloco ${r.name}`,className:"max-h-[92vh] w-full max-w-3xl overflow-y-auto rounded-xl bg-card-light shadow-2xl dark:bg-card-dark",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-zinc-200/80 p-4 dark:border-zinc-800/80",children:[e.jsxs("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:[r.id,". ",r.name]}),e.jsxs("div",{className:"flex items-center gap-2",children:[f&&d&&e.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-md border border-zinc-300 px-3 py-1.5 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:E,children:[e.jsx("span",{className:"material-symbols-outlined text-sm","aria-hidden":"true",children:"skip_next"}),"Proximo bloco"]}),e.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-md bg-primary px-3 py-1.5 text-xs font-semibold text-white hover:brightness-110",onClick:S,children:[e.jsx("span",{className:"material-symbols-outlined text-sm","aria-hidden":"true",children:"save"}),"Salvar"]}),e.jsx("button",{ref:I,type:"button",className:"rounded-md p-2 text-text-light-secondary hover:bg-zinc-100 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:h,"aria-label":"Fechar",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]})]}),e.jsxs("div",{className:"space-y-5 p-4 md:p-6",children:[e.jsxs("section",{children:[e.jsx("p",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Objetivo"}),e.jsx("p",{className:"mt-1 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:r.objective}),e.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:r.questions.map(s=>e.jsx("li",{children:s},s))})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Nivel de maturidade"}),e.jsxs("span",{className:"rounded-full bg-primary/10 px-3 py-1 text-xs font-semibold text-primary dark:bg-primary/20",children:["Nivel ",m,"/9"]})]}),e.jsx("input",{type:"range",min:1,max:9,step:1,value:m,onChange:s=>N(Number(s.target.value)),className:"mt-3 h-2 w-full cursor-pointer appearance-none rounded-lg bg-zinc-200 dark:bg-zinc-700"}),e.jsx("div",{className:"mt-3 grid grid-cols-9 gap-1",children:Array.from({length:9},(s,p)=>p+1).map(s=>e.jsx("button",{type:"button",className:`rounded-md border px-2 py-1 text-xs font-semibold transition ${m===s?"border-primary bg-primary text-white":"border-zinc-300 text-text-light-secondary hover:border-primary dark:border-zinc-700 dark:text-text-dark-secondary"}`,onClick:()=>N(s),children:s},s))}),u&&e.jsxs("div",{className:"mt-4 rounded-lg border border-primary/25 bg-primary/5 p-4 dark:border-primary/35 dark:bg-primary/10",children:[e.jsxs("p",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:["Descricao do nivel ",u.level]}),e.jsx("p",{className:"mt-1 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:u.description}),e.jsxs("p",{className:"mt-3 text-xs text-text-light-secondary dark:text-text-dark-secondary",children:[e.jsx("strong",{children:"Evidencia sugerida:"})," ",u.evidence]})]}),$&&e.jsx("p",{className:"mt-4 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-800 dark:border-amber-700/40 dark:bg-amber-900/20 dark:text-amber-300",children:"Regra pratica do guia: evite notas acima de 3 sem registrar evidencia minima."})]}),r.exampleTips&&r.exampleTips.length>0&&e.jsxs("section",{className:"rounded-lg border border-zinc-200/80 bg-zinc-50 p-4 dark:border-zinc-800/80 dark:bg-zinc-800/60",children:[e.jsx("p",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Dicas de Exemplos:"}),e.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:r.exampleTips.map(s=>e.jsx("li",{children:s},s))})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Evidencias"}),e.jsx("textarea",{value:y,onChange:s=>F(s.target.value),rows:4,placeholder:"Inclua links, metricas, entrevistas ou documentos que sustentem a nota.",className:"mt-2 w-full rounded-lg border-zinc-300 bg-zinc-50 p-3 text-sm text-text-light-primary focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Notas do bloco"}),e.jsx("textarea",{value:g,onChange:s=>L(s.target.value),rows:4,placeholder:"Descreva a situacao atual deste bloco...",className:"mt-2 w-full rounded-lg border-zinc-300 bg-zinc-50 p-3 text-sm text-text-light-primary focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-zinc-200/80 p-4 dark:border-zinc-800/80",children:[f&&d&&e.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-lg border border-zinc-300 px-4 py-2 text-sm font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:E,children:[e.jsx("span",{className:"material-symbols-outlined text-base","aria-hidden":"true",children:"skip_next"}),"Proximo bloco"]}),e.jsx("button",{type:"button",className:"rounded-lg border border-zinc-300 px-4 py-2 text-sm font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:h,children:"Cancelar"}),e.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white hover:brightness-110",onClick:S,children:[e.jsx("span",{className:"material-symbols-outlined text-base","aria-hidden":"true",children:"save"}),"Salvar"]})]})]})})}function Fe({group:r,onClose:i}){const{dialogRef:h,initialFocusRef:o}=xe(!0);return a.useEffect(()=>{const d=f=>{f.key==="Escape"&&i()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[i]),e.jsx("div",{className:"fixed inset-0 z-40 flex items-end justify-center bg-slate-900/55 p-4 md:items-center",children:e.jsxs("div",{ref:h,tabIndex:-1,role:"dialog","aria-modal":"true","aria-label":`Detalhamento do agrupamento ${r.name}`,className:"w-full max-w-2xl rounded-xl bg-card-light shadow-2xl dark:bg-card-dark",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-zinc-200/80 p-4 dark:border-zinc-800/80",children:[e.jsx("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:"Detalhamento do Agrupamento"}),e.jsx("button",{ref:o,type:"button",className:"rounded-md p-2 text-text-light-secondary hover:bg-zinc-100 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:i,"aria-label":"Fechar",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("div",{className:"space-y-4 p-4 md:p-6",children:[e.jsx("p",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:r.detailTitle}),e.jsxs("div",{className:"space-y-3 rounded-lg border border-zinc-200/80 bg-zinc-50 p-4 dark:border-zinc-800/80 dark:bg-zinc-800/60",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-text-light-secondary dark:text-text-dark-secondary",children:"Agrupamento"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:r.detailTitle})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-text-light-secondary dark:text-text-dark-secondary",children:"Foco Conceitual"}),e.jsx("p",{className:"mt-1 text-sm text-text-light-primary dark:text-text-dark-primary",children:r.conceptualFocus})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-text-light-secondary dark:text-text-dark-secondary",children:"Blocos IncluÃ­dos"}),e.jsx("p",{className:"mt-1 text-sm text-text-light-primary dark:text-text-dark-primary",children:r.includedBlocks})]})]})]}),e.jsx("div",{className:"flex justify-end border-t border-zinc-200/80 p-4 dark:border-zinc-800/80",children:e.jsx("button",{type:"button",className:"rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white hover:brightness-110",onClick:i,children:"Fechar"})})]})})}const $e=108,Ge="srl-canvas-onboarding-v1",me="srl-canvas-advanced-mode-v1",ue=r=>`${Ge}:${r}`,Ke=()=>typeof window>"u"?!1:window.localStorage.getItem(me)==="enabled",Ve=r=>{typeof window>"u"||window.localStorage.setItem(me,r?"enabled":"disabled")},Ye=r=>Math.min(9,Math.max(1,r)),He=r=>{if(!(r instanceof HTMLElement))return!1;const i=r.tagName.toLowerCase();return i==="input"||i==="textarea"||i==="select"||r.isContentEditable},Ue=r=>typeof window>"u"?!1:window.localStorage.getItem(ue(r))==="done",P=r=>{typeof window>"u"||window.localStorage.setItem(ue(r),"done")};function Ze(){var oe;const r=ze(),{user:i,isEnabled:h}=we(),{meta:o,blocks:d,setMeta:f,updateBlock:g,resetCanvas:L,darkMode:y,toggleDarkMode:F,remoteCanvasId:m,setRemoteCanvasId:N,storageScope:x}=Ce(),[I,u]=a.useState(null),[S,E]=a.useState(null),[$,s]=a.useState(!1),[p,Q]=a.useState(!1),[pe,_]=a.useState(null),[c,be]=a.useState(()=>Ke()),[D,G]=a.useState("all"),[K,V]=a.useState("idle"),[he,W]=a.useState(null),Y=a.useRef(Te("canvas")),Z=a.useRef(!1),H=a.useRef(!1),ee=a.useRef(!1),te=a.useRef(0),re=a.useRef(!1),ae=a.useRef(null),se=a.useRef(null),U=a.useMemo(()=>j.map(t=>{var n;return((n=d[t.id])==null?void 0:n.score)??0}),[d]),R=a.useMemo(()=>De(U),[U]),q=a.useMemo(()=>JSON.stringify({meta:o,blocks:d}),[o,d]),X=(i==null?void 0:i.id)??null,ge=`[ ${R.total} / ${$e} ]`,M=I?Se[I]:null,ne=S?le[S]:null,A=pe===x||Ue(x),B=Ee(o),z=!!(o.startup.trim()&&o.evaluator.trim()&&o.date.trim()),w=typeof((oe=d[1])==null?void 0:oe.score)=="number",k=z?w?3:2:1,C=a.useMemo(()=>j.filter(t=>{var n;return typeof((n=d[t.id])==null?void 0:n.score)!="number"}),[d]),v=a.useMemo(()=>j.filter(t=>{var n;return typeof((n=d[t.id])==null?void 0:n.score)=="number"}),[d]),de=a.useMemo(()=>!c||D==="all"?j:D==="pending"?C:v,[D,c,C,v]);a.useEffect(()=>{te.current=v.length,re.current=ce({meta:o,blocks:d})},[d,o,v.length]),a.useEffect(()=>{Z.current||(J("canvas_started",{sessionId:Y.current,scopeType:x===Ae?"guest":"authenticated",supabaseEnabled:h,advancedMode:c}),Z.current=!0)},[c,h,x]),a.useEffect(()=>{H.current||v.length<j.length||(J("canvas_completed",{sessionId:Y.current,filledBlocks:v.length,completionPercent:Math.round(R.completion),advancedMode:c}),H.current=!0)},[c,R.completion,v.length]),a.useEffect(()=>{const t=Y.current;return()=>{if(H.current||ee.current||!re.current)return;const n=te.current;J("canvas_abandoned",{sessionId:t,filledBlocks:n,stage:Oe(n)}),ee.current=!0}},[]),a.useEffect(()=>{if(!h||!X||!ce({meta:o,blocks:d})||q===ae.current)return;let t=!0;const n=window.setTimeout(()=>{V("saving"),W(null),Re({id:m??void 0,userId:X,meta:o,blocks:d}).then(l=>{t&&(l.id!==m&&N(l.id),ae.current=q,V("saved"))}).catch(l=>{t&&(V("error"),W(l instanceof Error?l.message:"Falha ao sincronizar com banco."))})},800);return()=>{t=!1,window.clearTimeout(n)}},[d,q,h,o,m,N,X]);const ye=()=>{window.confirm("Tem certeza que deseja limpar todo o canvas atual?")&&L()},fe=()=>{const t=!c;be(t),G("all"),Ve(t)},ke=()=>{Q(!0)},T=()=>{!A&&z&&w&&(P(x),_(x)),s(!0)},ve=()=>{const t=C[0];if(t){u(t.id);return}T()},ie=(t,n)=>{var O;const l=(O=d[t])==null?void 0:O.score,b=Ye((l??(n>0?0:2))+n);g(t,{score:b})},je=(t,n)=>{g(t,n);const l=j.findIndex(O=>O.id===t),b=l>=0?j[l+1]:null;u(b?b.id:null)},Ne=()=>{P(x),_(x)};return a.useEffect(()=>{if(!c)return;const t=n=>{if(He(n.target))return;const l=n.key.toLowerCase();if(l==="n"){n.preventDefault();const b=C[0];if(b){u(b.id);return}!A&&z&&w&&(P(x),_(x)),s(!0);return}if(l==="r"){n.preventDefault(),!A&&z&&w&&(P(x),_(x)),s(!0);return}l==="f"&&(n.preventDefault(),G(b=>b==="all"?"pending":b==="pending"?"scored":"all"))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[c,w,z,A,C,x]),e.jsxs("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden bg-background-light font-display dark:bg-background-dark",children:[e.jsxs("header",{className:"sticky top-0 z-10 flex h-16 items-center border-b border-zinc-200/80 bg-background-light/85 px-4 backdrop-blur-sm dark:border-zinc-800/80 dark:bg-background-dark/85",children:[e.jsx("button",{type:"button",onClick:()=>r("/dashboard"),className:"flex h-12 w-12 items-center justify-center text-text-light-primary dark:text-text-dark-primary","aria-label":"Ir para dashboard",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"arrow_back_ios_new"})}),e.jsx("h1",{className:"flex-1 text-center text-lg font-bold tracking-tight text-text-light-primary dark:text-text-dark-primary",children:"Meu SRL Canvas"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",onClick:ke,className:"flex h-12 w-12 items-center justify-center text-text-light-primary dark:text-text-dark-primary","aria-label":"Abrir formulario de opiniao",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"rate_review"})}),e.jsx("button",{type:"button",onClick:F,className:"flex h-12 w-12 items-center justify-center text-text-light-primary dark:text-text-dark-primary","aria-label":"Alternar tema",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:y?"light_mode":"dark_mode"})}),e.jsx("button",{type:"button",onClick:T,className:"flex h-12 w-12 items-center justify-center text-text-light-primary dark:text-text-dark-primary","aria-label":"Compartilhar ou exportar",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"ios_share"})})]})]}),e.jsxs("main",{className:"flex-grow px-4 pb-28 pt-6",children:[e.jsxs("div",{className:"mb-6 rounded-xl border border-zinc-200/80 bg-card-light p-4 dark:border-zinc-800/80 dark:bg-card-dark",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Informacoes Gerais"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",className:`rounded-lg border px-3 py-1 text-xs font-semibold transition ${c?"border-primary bg-primary/10 text-primary":"border-zinc-300 text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800"}`,onClick:fe,"aria-pressed":c,children:["Modo avancado ",c?"ativo":"inativo"]}),e.jsx("button",{type:"button",className:"rounded-lg border border-zinc-300 px-3 py-1 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:ye,children:"Resetar Canvas"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"col-span-1",children:[e.jsx("span",{className:"block text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Startup"}),e.jsx("input",{ref:se,className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"text",placeholder:"Nome da Startup",value:o.startup,"aria-invalid":!B.startupValid,onChange:t=>f({startup:t.target.value})})]}),e.jsxs("label",{className:"col-span-1",children:[e.jsx("span",{className:"block text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Avaliador"}),e.jsx("input",{className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"text",placeholder:"Nome do Avaliador",value:o.evaluator,"aria-invalid":!B.evaluatorValid,onChange:t=>f({evaluator:t.target.value})})]}),e.jsxs("label",{className:"col-span-1",children:[e.jsx("span",{className:"block text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Data"}),e.jsx("input",{className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"date",value:o.date,"aria-invalid":!B.dateValid,onChange:t=>f({date:t.target.value})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("span",{className:"block text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Total"}),e.jsxs("div",{className:"mt-1 flex h-9 items-center rounded-md border border-zinc-300 bg-zinc-50 px-2 py-1 text-sm text-text-light-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",children:[e.jsx("span",{className:"whitespace-nowrap font-mono text-xs",children:ge}),e.jsx("div",{className:"ml-2 h-2.5 w-full overflow-hidden rounded-full bg-zinc-200 dark:bg-zinc-700",children:e.jsx("div",{className:"h-full rounded-full bg-primary transition-all",style:{width:`${Math.min(100,R.completion)}%`}})})]})]})]}),!B.isValid&&e.jsx("p",{className:"mt-3 text-xs text-amber-700 dark:text-amber-300",children:"Metadados incompletos: preencha Startup, Avaliador e Data valida para manter consistencia do diagnostico."}),h&&i&&e.jsxs("p",{className:"mt-3 text-xs text-text-light-secondary dark:text-text-dark-secondary",children:[K==="saving"&&"Sincronizando com banco...",K==="saved"&&"Sincronizado com banco.",K==="error"&&(he??"Falha ao sincronizar com banco.")]}),c&&e.jsxs("div",{className:"mt-3 rounded-lg border border-zinc-200/80 bg-zinc-50 p-3 text-xs text-text-light-secondary dark:border-zinc-800/80 dark:bg-zinc-900/40 dark:text-text-dark-secondary",children:[e.jsxs("p",{children:["Modo avancado: use ",e.jsx("strong",{children:"N"})," (proximo pendente), ",e.jsx("strong",{children:"R"})," ","(resultados) e ",e.jsx("strong",{children:"F"})," (alternar filtro)."]}),e.jsxs("p",{className:"mt-1",children:["Pendentes: ",e.jsx("strong",{children:C.length})," | Pontuados:"," ",e.jsx("strong",{children:v.length})]})]}),!A&&e.jsxs("section",{className:"mt-4 rounded-lg border border-primary/30 bg-primary/5 p-3 dark:border-primary/40 dark:bg-primary/10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary",children:"Primeira avaliacao guiada"}),e.jsx("button",{type:"button",onClick:Ne,className:"rounded-md border border-zinc-300 px-2 py-1 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Pular guia"})]}),e.jsxs("p",{className:"mt-2 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:["Passo ",k," de 3:"," ",k===1&&"preencha os metadados da avaliacao.",k===2&&"registre a primeira nota no bloco 1.",k===3&&"abra os resultados para fechar a jornada inicial."]}),e.jsxs("ol",{className:"mt-3 space-y-1 text-xs text-text-light-secondary dark:text-text-dark-secondary",children:[e.jsx("li",{className:z?"font-semibold text-primary":"",children:"1. Preencher Startup, Avaliador e Data"}),e.jsx("li",{className:w?"font-semibold text-primary":"",children:"2. Avaliar o bloco 1 (Problema/Oportunidade)"}),e.jsx("li",{className:k===3?"font-semibold text-primary":"",children:"3. Abrir Ver Resultados"})]}),e.jsxs("div",{className:"mt-3",children:[k===1&&e.jsx("button",{type:"button",onClick:()=>{var t;return(t=se.current)==null?void 0:t.focus()},className:"rounded-lg bg-primary px-3 py-1.5 text-xs font-semibold text-white hover:brightness-110",children:"Ir para metadados"}),k===2&&e.jsx("button",{type:"button",onClick:()=>u(1),className:"rounded-lg bg-primary px-3 py-1.5 text-xs font-semibold text-white hover:brightness-110",children:"Abrir bloco 1"}),k===3&&e.jsx("button",{type:"button",onClick:T,className:"rounded-lg bg-primary px-3 py-1.5 text-xs font-semibold text-white hover:brightness-110",children:"Abrir resultados"})]})]})]}),e.jsxs("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-2",children:[c?e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{type:"button",onClick:ve,className:"rounded-lg border border-zinc-300 px-3 py-2 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Proximo pendente"}),e.jsx("div",{className:"inline-flex rounded-lg border border-zinc-300 p-0.5 dark:border-zinc-700",children:[{key:"all",label:"Todos"},{key:"pending",label:"Pendentes"},{key:"scored",label:"Pontuados"}].map(t=>e.jsx("button",{type:"button",onClick:()=>G(t.key),className:`rounded-md px-2 py-1 text-xs font-semibold transition ${D===t.key?"bg-primary text-white":"text-text-light-secondary hover:bg-zinc-100 dark:text-text-dark-secondary dark:hover:bg-zinc-800"}`,children:t.label},t.key))})]}):e.jsx("div",{}),e.jsx("button",{type:"button",onClick:T,className:"rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white hover:brightness-110",children:"Ver Resultados"})]}),e.jsx("section",{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[de.map(t=>{const n=le[t.group],l=d[t.id],b=typeof(l==null?void 0:l.score)=="number";return e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-xl bg-card-light p-4 shadow-sm ring-1 ring-zinc-200/80 transition hover:-translate-y-0.5 hover:ring-primary/40 dark:bg-card-dark dark:ring-zinc-800/80",children:[e.jsxs("button",{type:"button",onClick:()=>u(t.id),className:"flex min-w-0 flex-1 cursor-pointer items-center gap-4 text-left",children:[e.jsx("div",{className:`flex size-12 shrink-0 items-center justify-center rounded-lg ${n.iconBgClass}`,children:e.jsx("span",{className:`material-symbols-outlined text-2xl ${n.iconTextClass}`,children:t.icon})}),e.jsxs("div",{className:"flex min-w-0 flex-col justify-center",children:[e.jsxs("p",{className:"font-semibold text-text-light-primary dark:text-text-dark-primary",children:[e.jsxs("span",{className:`font-bold ${n.badgeClass}`,children:[t.id,"."]})," ",t.name]}),e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary",children:b?`Nota: ${l.score}/9`:"Pendente"})]})]}),c?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>ie(t.id,-1),disabled:!b,className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-zinc-300 text-text-light-secondary hover:bg-zinc-100 disabled:cursor-not-allowed disabled:opacity-40 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800","aria-label":`Diminuir nota do bloco ${t.id}`,children:e.jsx("span",{className:"material-symbols-outlined text-base","aria-hidden":"true",children:"remove"})}),e.jsx("button",{type:"button",onClick:()=>ie(t.id,1),className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-zinc-300 text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800","aria-label":`Aumentar nota do bloco ${t.id}`,children:e.jsx("span",{className:"material-symbols-outlined text-base","aria-hidden":"true",children:"add"})}),e.jsx("button",{type:"button",onClick:()=>u(t.id),className:"inline-flex h-8 items-center gap-1 rounded-md border border-zinc-300 px-2 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Detalhes"})]}):e.jsx("button",{type:"button",onClick:()=>u(t.id),className:"inline-flex h-8 items-center gap-1 rounded-md border border-zinc-300 px-2 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Abrir"})]},t.id)}),de.length===0&&e.jsx("div",{className:"rounded-xl border border-dashed border-zinc-300 p-4 text-center text-sm text-text-light-secondary dark:border-zinc-700 dark:text-text-dark-secondary",children:"Nenhum bloco encontrado para o filtro selecionado."})]})}),e.jsx("div",{className:"mt-8 flex flex-wrap items-center justify-center gap-x-2 gap-y-2 px-2 text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:Me.map(t=>e.jsxs("button",{type:"button",onClick:()=>E(t.key),className:"flex items-center gap-2 rounded-full border border-transparent px-2 py-1 transition hover:border-zinc-300 hover:bg-zinc-100/70 dark:hover:border-zinc-700 dark:hover:bg-zinc-800/70","aria-label":`Ver detalhes do agrupamento ${t.name}`,title:`Ver detalhes de ${t.detailTitle}`,children:[e.jsx("div",{className:`size-3 rounded-full ${t.dotClass}`}),e.jsx("span",{children:t.name})]},t.key))})]}),e.jsx(Ie,{}),M&&e.jsx(Le,{block:M,value:d[M.id],onClose:()=>u(null),onSave:t=>{g(M.id,t),u(null)},showSaveAndNext:c,onSaveAndNext:c?t=>je(M.id,t):void 0}),$&&e.jsx(Be,{darkMode:y,metrics:R,scores:U,onClose:()=>s(!1)}),ne&&e.jsx(Fe,{group:ne,onClose:()=>E(null)}),e.jsx(_e,{isOpen:p,nextPath:"/canvas",onClose:()=>Q(!1)})]})}export{Ze as CanvasPage};
