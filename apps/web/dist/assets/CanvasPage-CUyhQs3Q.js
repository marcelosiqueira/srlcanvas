import{r,j as e,c as we,u as Ce,a as Se,S as N,d as Ee,G as ce,v as Re,h as xe,s as Me,e as Ae,f as Ie}from"./index-D3aoGXCM.js";import{u as me}from"./useDialogA11y-DrFaqcae.js";import{F as _e,a as De}from"./FooterNav-DnmtxKHu.js";import{c as Be,R as Te}from"./ResultsModal-DGax47be.js";import{c as Oe,t as Q,g as Pe}from"./productMetrics-fBnYpfUG.js";const Fe=a=>{if(!(a instanceof HTMLElement))return!1;const d=a.tagName.toLowerCase();return d==="input"||d==="textarea"||d==="select"||a.isContentEditable};function Le({block:a,value:d,onClose:h,onSave:o,onSaveAndNext:i,showSaveAndNext:k=!1}){const[y,F]=r.useState(d.notes),[f,L]=r.useState(d.evidence),[c,z]=r.useState(d.score??1),{dialogRef:m,initialFocusRef:_}=me(!0);r.useEffect(()=>{const s=b=>{b.key==="Escape"&&h()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[h]);const p=r.useMemo(()=>a.levels.find(s=>s.level===c),[a.levels,c]),E=()=>{o({score:c,notes:y.trim(),evidence:f.trim()})},R=()=>{i&&i({score:c,notes:y.trim(),evidence:f.trim()})},$=c>3&&f.trim().length===0;return r.useEffect(()=>{const s=b=>{if(b.key>="1"&&b.key<="9"&&!Fe(b.target)){z(Number(b.key));return}(b.metaKey||b.ctrlKey)&&b.key==="Enter"&&(b.preventDefault(),o({score:c,notes:y.trim(),evidence:f.trim()}))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[f,y,o,c]),e.jsx("div",{className:"fixed inset-0 z-40 flex items-end justify-center bg-slate-900/55 p-4 md:items-center",children:e.jsxs("div",{ref:m,tabIndex:-1,role:"dialog","aria-modal":"true","aria-label":`Editar bloco ${a.name}`,className:"max-h-[92vh] w-full max-w-3xl overflow-y-auto rounded-xl bg-card-light shadow-2xl dark:bg-card-dark",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-zinc-200/80 p-4 dark:border-zinc-800/80",children:[e.jsxs("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:[a.id,". ",a.name]}),e.jsxs("div",{className:"flex items-center gap-2",children:[k&&i&&e.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-md border border-zinc-300 px-3 py-1.5 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:R,children:[e.jsx("span",{className:"material-symbols-outlined text-sm","aria-hidden":"true",children:"skip_next"}),"Proximo bloco"]}),e.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-md bg-primary px-3 py-1.5 text-xs font-semibold text-white hover:brightness-110",onClick:E,children:[e.jsx("span",{className:"material-symbols-outlined text-sm","aria-hidden":"true",children:"save"}),"Salvar"]}),e.jsx("button",{ref:_,type:"button",className:"rounded-md p-2 text-text-light-secondary hover:bg-zinc-100 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:h,"aria-label":"Fechar",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]})]}),e.jsxs("div",{className:"space-y-5 p-4 md:p-6",children:[e.jsxs("section",{children:[e.jsx("p",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Objetivo"}),e.jsx("p",{className:"mt-1 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:a.objective}),e.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:a.questions.map(s=>e.jsx("li",{children:s},s))})]}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Nivel de maturidade"}),e.jsxs("span",{className:"rounded-full bg-primary/10 px-3 py-1 text-xs font-semibold text-primary dark:bg-primary/20",children:["Nivel ",c,"/9"]})]}),e.jsx("input",{type:"range",min:1,max:9,step:1,value:c,onChange:s=>z(Number(s.target.value)),className:"mt-3 h-2 w-full cursor-pointer appearance-none rounded-lg bg-zinc-200 dark:bg-zinc-700"}),e.jsx("div",{className:"mt-3 grid grid-cols-9 gap-1",children:Array.from({length:9},(s,b)=>b+1).map(s=>e.jsx("button",{type:"button",className:`rounded-md border px-2 py-1 text-xs font-semibold transition ${c===s?"border-primary bg-primary text-white":"border-zinc-300 text-text-light-secondary hover:border-primary dark:border-zinc-700 dark:text-text-dark-secondary"}`,onClick:()=>z(s),children:s},s))}),p&&e.jsxs("div",{className:"mt-4 rounded-lg border border-primary/25 bg-primary/5 p-4 dark:border-primary/35 dark:bg-primary/10",children:[e.jsxs("p",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:["Descricao do nivel ",p.level]}),e.jsx("p",{className:"mt-1 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:p.description}),e.jsxs("p",{className:"mt-3 text-xs text-text-light-secondary dark:text-text-dark-secondary",children:[e.jsx("strong",{children:"Evidencia sugerida:"})," ",p.evidence]})]}),$&&e.jsx("p",{className:"mt-4 rounded-lg border border-amber-200 bg-amber-50 p-3 text-xs text-amber-800 dark:border-amber-700/40 dark:bg-amber-900/20 dark:text-amber-300",children:"Regra pratica do guia: evite notas acima de 3 sem registrar evidencia minima."})]}),a.exampleTips&&a.exampleTips.length>0&&e.jsxs("section",{className:"rounded-lg border border-zinc-200/80 bg-zinc-50 p-4 dark:border-zinc-800/80 dark:bg-zinc-800/60",children:[e.jsx("p",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Dicas de Exemplos:"}),e.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-5 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:a.exampleTips.map(s=>e.jsx("li",{children:s},s))})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Evidencias"}),e.jsx("textarea",{value:f,onChange:s=>L(s.target.value),rows:4,placeholder:"Inclua links, metricas, entrevistas ou documentos que sustentem a nota.",className:"mt-2 w-full rounded-lg border-zinc-300 bg-zinc-50 p-3 text-sm text-text-light-primary focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Notas do bloco"}),e.jsx("textarea",{value:y,onChange:s=>F(s.target.value),rows:4,placeholder:"Descreva a situacao atual deste bloco...",className:"mt-2 w-full rounded-lg border-zinc-300 bg-zinc-50 p-3 text-sm text-text-light-primary focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-zinc-200/80 p-4 dark:border-zinc-800/80",children:[k&&i&&e.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-lg border border-zinc-300 px-4 py-2 text-sm font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:R,children:[e.jsx("span",{className:"material-symbols-outlined text-base","aria-hidden":"true",children:"skip_next"}),"Proximo bloco"]}),e.jsx("button",{type:"button",className:"rounded-lg border border-zinc-300 px-4 py-2 text-sm font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:h,children:"Cancelar"}),e.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white hover:brightness-110",onClick:E,children:[e.jsx("span",{className:"material-symbols-outlined text-base","aria-hidden":"true",children:"save"}),"Salvar"]})]})]})})}function $e({group:a,onClose:d}){const{dialogRef:h,initialFocusRef:o}=me(!0);return r.useEffect(()=>{const i=k=>{k.key==="Escape"&&d()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[d]),e.jsx("div",{className:"fixed inset-0 z-40 flex items-end justify-center bg-slate-900/55 p-4 md:items-center",children:e.jsxs("div",{ref:h,tabIndex:-1,role:"dialog","aria-modal":"true","aria-label":`Detalhamento do agrupamento ${a.name}`,className:"w-full max-w-2xl rounded-xl bg-card-light shadow-2xl dark:bg-card-dark",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-zinc-200/80 p-4 dark:border-zinc-800/80",children:[e.jsx("h2",{className:"text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:"Detalhamento do Agrupamento"}),e.jsx("button",{ref:o,type:"button",className:"rounded-md p-2 text-text-light-secondary hover:bg-zinc-100 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:d,"aria-label":"Fechar",children:e.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),e.jsxs("div",{className:"space-y-4 p-4 md:p-6",children:[e.jsx("p",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:a.detailTitle}),e.jsxs("div",{className:"space-y-3 rounded-lg border border-zinc-200/80 bg-zinc-50 p-4 dark:border-zinc-800/80 dark:bg-zinc-800/60",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-text-light-secondary dark:text-text-dark-secondary",children:"Agrupamento"}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:a.detailTitle})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-text-light-secondary dark:text-text-dark-secondary",children:"Foco Conceitual"}),e.jsx("p",{className:"mt-1 text-sm text-text-light-primary dark:text-text-dark-primary",children:a.conceptualFocus})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-text-light-secondary dark:text-text-dark-secondary",children:"Blocos IncluÃ­dos"}),e.jsx("p",{className:"mt-1 text-sm text-text-light-primary dark:text-text-dark-primary",children:a.includedBlocks})]})]})]}),e.jsx("div",{className:"flex justify-end border-t border-zinc-200/80 p-4 dark:border-zinc-800/80",children:e.jsx("button",{type:"button",className:"rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white hover:brightness-110",onClick:d,children:"Fechar"})})]})})}const Ge=108,Ke="srl-canvas-onboarding-v1",ue="srl-canvas-advanced-mode-v1",pe=a=>`${Ke}:${a}`,Ve=()=>typeof window>"u"?!1:window.localStorage.getItem(ue)==="enabled",Ye=a=>{typeof window>"u"||window.localStorage.setItem(ue,a?"enabled":"disabled")},qe=a=>Math.min(9,Math.max(1,a)),He=a=>{if(!(a instanceof HTMLElement))return!1;const d=a.tagName.toLowerCase();return d==="input"||d==="textarea"||d==="select"||a.isContentEditable},Ue=a=>typeof window>"u"?!1:window.localStorage.getItem(pe(a))==="done",P=a=>{typeof window>"u"||window.localStorage.setItem(pe(a),"done")};function et(){var le;const a=we(),{user:d,isEnabled:h}=Ce(),{meta:o,blocks:i,setMeta:k,updateBlock:y,resetCanvas:F,darkMode:f,toggleDarkMode:L,remoteCanvasId:c,setRemoteCanvasId:z,storageScope:m}=Se(),[_,p]=r.useState(null),[E,R]=r.useState(null),[$,s]=r.useState(!1),[b,W]=r.useState(!1),[be,D]=r.useState(null),[l,he]=r.useState(()=>Ve()),[B,G]=r.useState("all"),[K,V]=r.useState("idle"),[ge,Z]=r.useState(null),Y=r.useRef(Oe("canvas")),ee=r.useRef(!1),q=r.useRef(!1),te=r.useRef(!1),re=r.useRef(0),ae=r.useRef(!1),se=r.useRef(null),H=r.useRef(!1),ne=r.useRef(null),U=r.useMemo(()=>N.map(t=>{var n;return((n=i[t.id])==null?void 0:n.score)??0}),[i]),M=r.useMemo(()=>Be(U),[U]),X=r.useMemo(()=>JSON.stringify({meta:o,blocks:i}),[o,i]),J=(d==null?void 0:d.id)??null,ye=`[ ${M.total} / ${Ge} ]`,A=_?Ee[_]:null,ie=E?ce[E]:null,I=be===m||Ue(m),T=Re(o),w=!!(o.startup.trim()&&o.evaluator.trim()&&o.date.trim()),C=typeof((le=i[1])==null?void 0:le.score)=="number",v=w?C?3:2:1,S=r.useMemo(()=>N.filter(t=>{var n;return typeof((n=i[t.id])==null?void 0:n.score)!="number"}),[i]),j=r.useMemo(()=>N.filter(t=>{var n;return typeof((n=i[t.id])==null?void 0:n.score)=="number"}),[i]),de=r.useMemo(()=>!l||B==="all"?N:B==="pending"?S:j,[B,l,S,j]);r.useEffect(()=>{re.current=j.length,ae.current=xe({meta:o,blocks:i})},[i,o,j.length]),r.useEffect(()=>{ee.current||(Q("canvas_started",{sessionId:Y.current,scopeType:m===Ie?"guest":"authenticated",supabaseEnabled:h,advancedMode:l}),ee.current=!0)},[l,h,m]),r.useEffect(()=>{q.current||j.length<N.length||(Q("canvas_completed",{sessionId:Y.current,filledBlocks:j.length,completionPercent:Math.round(M.completion),advancedMode:l}),q.current=!0)},[l,M.completion,j.length]),r.useEffect(()=>{const t=Y.current;return()=>{if(q.current||te.current||!ae.current)return;const n=re.current;Q("canvas_abandoned",{sessionId:t,filledBlocks:n,stage:Pe(n)}),te.current=!0}},[]),r.useEffect(()=>{if(!h||!J||!xe({meta:o,blocks:i})||X===se.current||!c&&H.current)return;let t=!0;const n=window.setTimeout(()=>{const x=!c;x&&(H.current=!0);const u=X;V("saving"),Z(null),Me({id:c??void 0,userId:J,meta:o,blocks:i}).then(g=>{t&&(g.id!==c&&z(g.id),se.current=u,V("saved"))}).catch(g=>{t&&(V("error"),Z(g instanceof Error?g.message:"Falha ao sincronizar com banco."))}).finally(()=>{x&&(H.current=!1)})},800);return()=>{t=!1,window.clearTimeout(n)}},[i,X,h,o,c,z,J]);const fe=()=>{window.confirm("Tem certeza que deseja limpar todo o canvas atual?")&&F()},ke=()=>{const t=!l;he(t),G("all"),Ye(t)},ve=()=>{W(!0)},O=()=>{!I&&w&&C&&(P(m),D(m)),s(!0)},je=()=>{const t=S[0];if(t){p(t.id);return}O()},oe=(t,n)=>{var g;const x=(g=i[t])==null?void 0:g.score,u=qe((x??(n>0?0:2))+n);y(t,{score:u})},Ne=(t,n)=>{y(t,n);const x=N.findIndex(g=>g.id===t),u=x>=0?N[x+1]:null;p(u?u.id:null)},ze=()=>{P(m),D(m)};return r.useEffect(()=>{if(!l)return;const t=n=>{if(He(n.target))return;const x=n.key.toLowerCase();if(x==="n"){n.preventDefault();const u=S[0];if(u){p(u.id);return}!I&&w&&C&&(P(m),D(m)),s(!0);return}if(x==="r"){n.preventDefault(),!I&&w&&C&&(P(m),D(m)),s(!0);return}x==="f"&&(n.preventDefault(),G(u=>u==="all"?"pending":u==="pending"?"scored":"all"))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[l,C,w,I,S,m]),e.jsxs("div",{className:"relative flex min-h-screen w-full flex-col overflow-x-hidden bg-background-light font-display dark:bg-background-dark",children:[e.jsxs("header",{className:"sticky top-0 z-10 flex h-16 items-center border-b border-zinc-200/80 bg-background-light/85 px-4 backdrop-blur-sm dark:border-zinc-800/80 dark:bg-background-dark/85",children:[e.jsx("button",{type:"button",onClick:()=>a("/dashboard"),className:"flex h-12 w-12 items-center justify-center text-text-light-primary dark:text-text-dark-primary","aria-label":"Ir para dashboard",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"arrow_back_ios_new"})}),e.jsx("h1",{className:"flex-1 text-center text-lg font-bold tracking-tight text-text-light-primary dark:text-text-dark-primary",children:"Meu SRL Canvas"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",onClick:ve,className:"flex h-12 w-12 items-center justify-center text-text-light-primary dark:text-text-dark-primary","aria-label":"Abrir formulario de opiniao",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"rate_review"})}),e.jsx("button",{type:"button",onClick:L,className:"flex h-12 w-12 items-center justify-center text-text-light-primary dark:text-text-dark-primary","aria-label":"Alternar tema",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:f?"light_mode":"dark_mode"})}),e.jsx("button",{type:"button",onClick:O,className:"flex h-12 w-12 items-center justify-center text-text-light-primary dark:text-text-dark-primary","aria-label":"Compartilhar ou exportar",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"ios_share"})})]})]}),e.jsxs("main",{className:"flex-grow px-4 pb-28 pt-6",children:[e.jsxs("div",{className:"mb-6 rounded-xl border border-zinc-200/80 bg-card-light p-4 dark:border-zinc-800/80 dark:bg-card-dark",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-semibold text-text-light-primary dark:text-text-dark-primary",children:"Informacoes Gerais"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",className:`rounded-lg border px-3 py-1 text-xs font-semibold transition ${l?"border-primary bg-primary/10 text-primary":"border-zinc-300 text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800"}`,onClick:ke,"aria-pressed":l,children:["Modo avancado ",l?"ativo":"inativo"]}),e.jsx("button",{type:"button",className:"rounded-lg border border-zinc-300 px-3 py-1 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",onClick:fe,children:"Resetar Canvas"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("label",{className:"col-span-1",children:[e.jsx("span",{className:"block text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Startup"}),e.jsx("input",{ref:ne,className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"text",placeholder:"Nome da Startup",value:o.startup,"aria-invalid":!T.startupValid,onChange:t=>k({startup:t.target.value})})]}),e.jsxs("label",{className:"col-span-1",children:[e.jsx("span",{className:"block text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Avaliador"}),e.jsx("input",{className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"text",placeholder:"Nome do Avaliador",value:o.evaluator,"aria-invalid":!T.evaluatorValid,onChange:t=>k({evaluator:t.target.value})})]}),e.jsxs("label",{className:"col-span-1",children:[e.jsx("span",{className:"block text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Data"}),e.jsx("input",{className:"mt-1 block w-full rounded-md border-zinc-300 bg-zinc-50 p-2 text-sm text-text-light-primary shadow-sm focus:border-primary focus:ring-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",type:"date",value:o.date,"aria-invalid":!T.dateValid,onChange:t=>k({date:t.target.value})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("span",{className:"block text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Total"}),e.jsxs("div",{className:"mt-1 flex h-9 items-center rounded-md border border-zinc-300 bg-zinc-50 px-2 py-1 text-sm text-text-light-primary dark:border-zinc-700 dark:bg-zinc-800 dark:text-text-dark-primary",children:[e.jsx("span",{className:"whitespace-nowrap font-mono text-xs",children:ye}),e.jsx("div",{className:"ml-2 h-2.5 w-full overflow-hidden rounded-full bg-zinc-200 dark:bg-zinc-700",children:e.jsx("div",{className:"h-full rounded-full bg-primary transition-all",style:{width:`${Math.min(100,M.completion)}%`}})})]})]})]}),!T.isValid&&e.jsx("p",{className:"mt-3 text-xs text-amber-700 dark:text-amber-300",children:"Metadados incompletos: preencha Startup, Avaliador e Data valida para manter consistencia do diagnostico."}),h&&d&&e.jsxs("p",{className:"mt-3 text-xs text-text-light-secondary dark:text-text-dark-secondary",children:[K==="saving"&&"Sincronizando com banco...",K==="saved"&&"Sincronizado com banco.",K==="error"&&(ge??"Falha ao sincronizar com banco.")]}),l&&e.jsxs("div",{className:"mt-3 rounded-lg border border-zinc-200/80 bg-zinc-50 p-3 text-xs text-text-light-secondary dark:border-zinc-800/80 dark:bg-zinc-900/40 dark:text-text-dark-secondary",children:[e.jsxs("p",{children:["Modo avancado: use ",e.jsx("strong",{children:"N"})," (proximo pendente), ",e.jsx("strong",{children:"R"})," ","(resultados) e ",e.jsx("strong",{children:"F"})," (alternar filtro)."]}),e.jsxs("p",{className:"mt-1",children:["Pendentes: ",e.jsx("strong",{children:S.length})," | Pontuados:"," ",e.jsx("strong",{children:j.length})]})]}),!I&&e.jsxs("section",{className:"mt-4 rounded-lg border border-primary/30 bg-primary/5 p-3 dark:border-primary/40 dark:bg-primary/10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-primary",children:"Primeira avaliacao guiada"}),e.jsx("button",{type:"button",onClick:ze,className:"rounded-md border border-zinc-300 px-2 py-1 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Pular guia"})]}),e.jsxs("p",{className:"mt-2 text-sm text-text-light-secondary dark:text-text-dark-secondary",children:["Passo ",v," de 3: ",v===1&&"preencha os metadados da avaliacao.",v===2&&"registre a primeira nota no bloco 1.",v===3&&"abra os resultados para fechar a jornada inicial."]}),e.jsxs("ol",{className:"mt-3 space-y-1 text-xs text-text-light-secondary dark:text-text-dark-secondary",children:[e.jsx("li",{className:w?"font-semibold text-primary":"",children:"1. Preencher Startup, Avaliador e Data"}),e.jsx("li",{className:C?"font-semibold text-primary":"",children:"2. Avaliar o bloco 1 (Problema/Oportunidade)"}),e.jsx("li",{className:v===3?"font-semibold text-primary":"",children:"3. Abrir Ver Resultados"})]}),e.jsxs("div",{className:"mt-3",children:[v===1&&e.jsx("button",{type:"button",onClick:()=>{var t;return(t=ne.current)==null?void 0:t.focus()},className:"rounded-lg bg-primary px-3 py-1.5 text-xs font-semibold text-white hover:brightness-110",children:"Ir para metadados"}),v===2&&e.jsx("button",{type:"button",onClick:()=>p(1),className:"rounded-lg bg-primary px-3 py-1.5 text-xs font-semibold text-white hover:brightness-110",children:"Abrir bloco 1"}),v===3&&e.jsx("button",{type:"button",onClick:O,className:"rounded-lg bg-primary px-3 py-1.5 text-xs font-semibold text-white hover:brightness-110",children:"Abrir resultados"})]})]})]}),e.jsxs("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-2",children:[l?e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("button",{type:"button",onClick:je,className:"rounded-lg border border-zinc-300 px-3 py-2 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Proximo pendente"}),e.jsx("div",{className:"inline-flex rounded-lg border border-zinc-300 p-0.5 dark:border-zinc-700",children:[{key:"all",label:"Todos"},{key:"pending",label:"Pendentes"},{key:"scored",label:"Pontuados"}].map(t=>e.jsx("button",{type:"button",onClick:()=>G(t.key),className:`rounded-md px-2 py-1 text-xs font-semibold transition ${B===t.key?"bg-primary text-white":"text-text-light-secondary hover:bg-zinc-100 dark:text-text-dark-secondary dark:hover:bg-zinc-800"}`,children:t.label},t.key))})]}):e.jsx("div",{}),e.jsx("button",{type:"button",onClick:O,className:"rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white hover:brightness-110",children:"Ver Resultados"})]}),e.jsx("section",{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[de.map(t=>{const n=ce[t.group],x=i[t.id],u=typeof(x==null?void 0:x.score)=="number";return e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-xl bg-card-light p-4 shadow-sm ring-1 ring-zinc-200/80 transition hover:-translate-y-0.5 hover:ring-primary/40 dark:bg-card-dark dark:ring-zinc-800/80",children:[e.jsxs("button",{type:"button",onClick:()=>p(t.id),className:"flex min-w-0 flex-1 cursor-pointer items-center gap-4 text-left",children:[e.jsx("div",{className:`flex size-12 shrink-0 items-center justify-center rounded-lg ${n.iconBgClass}`,children:e.jsx("span",{className:`material-symbols-outlined text-2xl ${n.iconTextClass}`,children:t.icon})}),e.jsxs("div",{className:"flex min-w-0 flex-col justify-center",children:[e.jsxs("p",{className:"font-semibold text-text-light-primary dark:text-text-dark-primary",children:[e.jsxs("span",{className:`font-bold ${n.badgeClass}`,children:[t.id,"."]})," ",t.name]}),e.jsx("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary",children:u?`Nota: ${x.score}/9`:"Pendente"})]})]}),l?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:()=>oe(t.id,-1),disabled:!u,className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-zinc-300 text-text-light-secondary hover:bg-zinc-100 disabled:cursor-not-allowed disabled:opacity-40 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800","aria-label":`Diminuir nota do bloco ${t.id}`,children:e.jsx("span",{className:"material-symbols-outlined text-base","aria-hidden":"true",children:"remove"})}),e.jsx("button",{type:"button",onClick:()=>oe(t.id,1),className:"inline-flex h-8 w-8 items-center justify-center rounded-md border border-zinc-300 text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800","aria-label":`Aumentar nota do bloco ${t.id}`,children:e.jsx("span",{className:"material-symbols-outlined text-base","aria-hidden":"true",children:"add"})}),e.jsx("button",{type:"button",onClick:()=>p(t.id),className:"inline-flex h-8 items-center gap-1 rounded-md border border-zinc-300 px-2 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Detalhes"})]}):e.jsx("button",{type:"button",onClick:()=>p(t.id),className:"inline-flex h-8 items-center gap-1 rounded-md border border-zinc-300 px-2 text-xs font-semibold text-text-light-secondary hover:bg-zinc-100 dark:border-zinc-700 dark:text-text-dark-secondary dark:hover:bg-zinc-800",children:"Abrir"})]},t.id)}),de.length===0&&e.jsx("div",{className:"rounded-xl border border-dashed border-zinc-300 p-4 text-center text-sm text-text-light-secondary dark:border-zinc-700 dark:text-text-dark-secondary",children:"Nenhum bloco encontrado para o filtro selecionado."})]})}),e.jsx("div",{className:"mt-8 flex flex-wrap items-center justify-center gap-x-2 gap-y-2 px-2 text-xs font-medium text-text-light-secondary dark:text-text-dark-secondary",children:Ae.map(t=>e.jsxs("button",{type:"button",onClick:()=>R(t.key),className:"flex items-center gap-2 rounded-full border border-transparent px-2 py-1 transition hover:border-zinc-300 hover:bg-zinc-100/70 dark:hover:border-zinc-700 dark:hover:bg-zinc-800/70","aria-label":`Ver detalhes do agrupamento ${t.name}`,title:`Ver detalhes de ${t.detailTitle}`,children:[e.jsx("div",{className:`size-3 rounded-full ${t.dotClass}`}),e.jsx("span",{children:t.name})]},t.key))})]}),e.jsx(_e,{}),A&&e.jsx(Le,{block:A,value:i[A.id],onClose:()=>p(null),onSave:t=>{y(A.id,t),p(null)},showSaveAndNext:l,onSaveAndNext:l?t=>Ne(A.id,t):void 0}),$&&e.jsx(Te,{darkMode:f,metrics:M,scores:U,onClose:()=>s(!1)}),ie&&e.jsx($e,{group:ie,onClose:()=>R(null)}),e.jsx(De,{isOpen:b,nextPath:"/canvas",onClose:()=>W(!1)})]})}export{et as CanvasPage};
